{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{E3o2:function(l,n,e){\"use strict\";e.r(n);var t=e(\"8Y7J\");class i{}var u=e(\"pMnS\"),a=e(\"ZZ/e\"),o=e(\"oBZk\"),r=e(\"SVse\"),s=e(\"mrSG\"),c=e(\"a3Cf\"),h=function(l){function n(){var n=null!==l&&l.apply(this,arguments)||this;return n.DestinationType={DATA_URL:0,FILE_URI:1,NATIVE_URI:2},n.EncodingType={JPEG:0,PNG:1},n.MediaType={PICTURE:0,VIDEO:1,ALLMEDIA:2},n.PictureSourceType={PHOTOLIBRARY:0,CAMERA:1,SAVEDPHOTOALBUM:2},n.PopoverArrowDirection={ARROW_UP:1,ARROW_DOWN:2,ARROW_LEFT:4,ARROW_RIGHT:8,ARROW_ANY:15},n.Direction={BACK:0,FRONT:1},n}return s.c(n,l),n.prototype.getPicture=function(l){return Object(c.cordova)(this,\"getPicture\",{callbackOrder:\"reverse\"},arguments)},n.prototype.cleanup=function(){return Object(c.cordova)(this,\"cleanup\",{platforms:[\"iOS\"]},arguments)},n.pluginName=\"Camera\",n.plugin=\"cordova-plugin-camera\",n.pluginRef=\"navigator.camera\",n.repo=\"https://github.com/apache/cordova-plugin-camera\",n.platforms=[\"Android\",\"Browser\",\"iOS\",\"Windows\"],n}(c.IonicNativePlugin),b=e(\"01F9\"),p=e(\"Yttj\"),d=e(\"iWj2\"),m=e(\"nYR2\");const f=\"my_images\";class g{constructor(l,n,e,t,i,u,a,o,r,s,c){this.camera=l,this.file=n,this.http=e,this.webview=t,this.actionSheetController=i,this.toastController=u,this.storage=a,this.plt=o,this.loadingController=r,this.ref=s,this.filePath=c,this.images=[]}ngOnInit(){this.plt.ready().then(()=>{this.loadStoredImages()})}loadStoredImages(){this.storage.get(f).then(l=>{if(l){let n=JSON.parse(l);this.images=[];for(let l of n){let n=this.file.dataDirectory+l,e=this.pathForImage(n);this.images.push({name:l,path:e,filePath:n})}}})}pathForImage(l){return null===l?\"\":this.webview.convertFileSrc(l)}presentToast(l){return s.b(this,void 0,void 0,(function*(){(yield this.toastController.create({message:l,position:\"bottom\",duration:3e3})).present()}))}selectImage(){return s.b(this,void 0,void 0,(function*(){const l=yield this.actionSheetController.create({header:\"Select Image source\",buttons:[{text:\"Load from Library\",handler:()=>{this.takePicture(this.camera.PictureSourceType.PHOTOLIBRARY)}},{text:\"Use Camera\",handler:()=>{this.takePicture(this.camera.PictureSourceType.CAMERA)}},{text:\"Cancel\",role:\"cancel\"}]});yield l.present()}))}takePicture(l){this.camera.getPicture({quality:100,sourceType:l,saveToPhotoAlbum:!1,correctOrientation:!0}).then(n=>{if(this.platform.is(\"android\")&&l===this.camera.PictureSourceType.PHOTOLIBRARY)this.filePath.resolveNativePath(n).then(l=>{let e=l.substr(0,l.lastIndexOf(\"/\")+1),t=n.substring(n.lastIndexOf(\"/\")+1,n.lastIndexOf(\"?\"));this.copyFileToLocalDir(e,t,this.createFileName())});else{var e=n.substr(n.lastIndexOf(\"/\")+1),t=n.substr(0,n.lastIndexOf(\"/\")+1);this.copyFileToLocalDir(t,e,this.createFileName())}})}createFileName(){return(new Date).getTime()+\".jpg\"}copyFileToLocalDir(l,n,e){this.file.copyFile(l,n,this.file.dataDirectory,e).then(l=>{this.updateStoredImages(e)},l=>{this.presentToast(\"Error while storing file.\")})}updateStoredImages(l){this.storage.get(f).then(n=>{let e=JSON.parse(n);e?(e.push(l),this.storage.set(f,JSON.stringify(e))):this.storage.set(f,JSON.stringify([l]));let t=this.file.dataDirectory+l,i=this.pathForImage(t);this.images=[{name:l,path:i,filePath:t},...this.images],this.ref.detectChanges()})}deleteImage(l,n){this.images.splice(n,1),this.storage.get(f).then(n=>{let e=JSON.parse(n).filter(n=>n!=l.name);this.storage.set(f,JSON.stringify(e));var t=l.filePath.substr(0,l.filePath.lastIndexOf(\"/\")+1);this.file.removeFile(t,l.name).then(l=>{this.presentToast(\"File removed.\")})})}startUpload(l){this.file.resolveLocalFilesystemUrl(l.filePath).then(l=>{l.file(l=>this.readFile(l))}).catch(l=>{this.presentToast(\"Error while reading file.\")})}readFile(l){const n=new FileReader;n.onload=()=>{const e=new FormData,t=new Blob([n.result],{type:l.type});e.append(\"file\",t,l.name),this.uploadImageData(e)},n.readAsArrayBuffer(l)}uploadImageData(l){return s.b(this,void 0,void 0,(function*(){const n=yield this.loadingController.create({message:\"Uploading image...\"});yield n.present(),this.http.post(\"http://192.168.64.2/server_easymc/upload.php\",l).pipe(Object(m.a)(()=>{n.dismiss()})).subscribe(l=>{this.presentToast(l.success?\"File upload complete.\":\"File upload failed.\")})}))}}var k=e(\"IheW\"),y=e(\"xgBC\"),x=t.ob({encapsulation:0,styles:[[\"\"]],data:{}});function I(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,2,\"h3\",[[\"text-center\",\"\"]],null,null,null,null,null)),t.pb(1,16384,null,0,a.d,[t.k],null,null),(l()(),t.Jb(-1,null,[\"Please Select Image!\"]))],null,null)}function A(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,17,\"ion-item\",[[\"text-wrap\",\"\"]],null,null,null,o.pb,o.x)),t.pb(1,49152,null,0,a.H,[t.h,t.k,t.x],null,null),t.pb(2,16384,null,0,a.d,[t.k],null,null),(l()(),t.qb(3,0,null,0,3,\"ion-thumbnail\",[[\"slot\",\"start\"]],null,null,null,o.Hb,o.P)),t.pb(4,49152,null,0,a.zb,[t.h,t.k,t.x],null,null),(l()(),t.qb(5,0,null,0,1,\"ion-img\",[],null,null,null,o.lb,o.t)),t.pb(6,49152,null,0,a.D,[t.h,t.k,t.x],{src:[0,\"src\"]},null),(l()(),t.qb(7,0,null,0,2,\"ion-label\",[],null,null,null,o.qb,o.y)),t.pb(8,49152,null,0,a.N,[t.h,t.k,t.x],null,null),(l()(),t.Jb(9,0,[\" \",\" \"])),(l()(),t.qb(10,0,null,0,3,\"ion-button\",[[\"fill\",\"clear\"],[\"slot\",\"end\"]],null,[[null,\"click\"]],(function(l,n,e){var t=!0;return\"click\"===n&&(t=!1!==l.component.startUpload(l.context.$implicit)&&t),t}),o.V,o.d)),t.pb(11,49152,null,0,a.k,[t.h,t.k,t.x],{fill:[0,\"fill\"]},null),(l()(),t.qb(12,0,null,0,1,\"ion-icon\",[[\"name\",\"cloud-upload\"],[\"slot\",\"icon-only\"]],null,null,null,o.kb,o.s)),t.pb(13,49152,null,0,a.C,[t.h,t.k,t.x],{name:[0,\"name\"]},null),(l()(),t.qb(14,0,null,0,3,\"ion-button\",[[\"fill\",\"clear\"],[\"slot\",\"end\"]],null,[[null,\"click\"]],(function(l,n,e){var t=!0;return\"click\"===n&&(t=!1!==l.component.deleteImage(l.context.$implicit,l.context.index)&&t),t}),o.V,o.d)),t.pb(15,49152,null,0,a.k,[t.h,t.k,t.x],{fill:[0,\"fill\"]},null),(l()(),t.qb(16,0,null,0,1,\"ion-icon\",[[\"name\",\"trash\"],[\"slot\",\"icon-only\"]],null,null,null,o.kb,o.s)),t.pb(17,49152,null,0,a.C,[t.h,t.k,t.x],{name:[0,\"name\"]},null)],(function(l,n){l(n,6,0,n.context.$implicit.path),l(n,11,0,\"clear\"),l(n,13,0,\"cloud-upload\"),l(n,15,0,\"clear\"),l(n,17,0,\"trash\")}),(function(l,n){l(n,9,0,n.context.$implicit.name)}))}function O(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,9,\"ion-header\",[],null,null,null,o.jb,o.r)),t.pb(1,49152,null,0,a.B,[t.h,t.k,t.x],null,null),(l()(),t.qb(2,0,null,0,7,\"ion-toolbar\",[],null,null,null,o.Jb,o.R)),t.pb(3,49152,null,0,a.Cb,[t.h,t.k,t.x],null,null),(l()(),t.qb(4,0,null,0,5,\"ion-buttons\",[[\"slot\",\"primary\"]],null,null,null,o.W,o.e)),t.pb(5,49152,null,0,a.l,[t.h,t.k,t.x],null,null),(l()(),t.qb(6,0,null,0,3,\"ion-button\",[[\"color\",\"dark\"]],null,null,null,o.V,o.d)),t.pb(7,49152,null,0,a.k,[t.h,t.k,t.x],{color:[0,\"color\"]},null),(l()(),t.qb(8,0,null,0,1,\"ion-icon\",[[\"name\",\"search\"],[\"slot\",\"icon-only\"]],null,null,null,o.kb,o.s)),t.pb(9,49152,null,0,a.C,[t.h,t.k,t.x],{name:[0,\"name\"]},null),(l()(),t.qb(10,0,null,null,8,\"ion-content\",[[\"padding\",\"\"]],null,null,null,o.eb,o.m)),t.pb(11,49152,null,0,a.u,[t.h,t.k,t.x],null,null),t.pb(12,16384,null,0,a.d,[t.k],null,null),(l()(),t.fb(16777216,null,0,1,null,I)),t.pb(14,16384,null,0,r.i,[t.L,t.I],{ngIf:[0,\"ngIf\"]},null),(l()(),t.qb(15,0,null,0,3,\"ion-list\",[],null,null,null,o.rb,o.z)),t.pb(16,49152,null,0,a.O,[t.h,t.k,t.x],null,null),(l()(),t.fb(16777216,null,0,1,null,A)),t.pb(18,278528,null,0,r.h,[t.L,t.I,t.q],{ngForOf:[0,\"ngForOf\"]},null),(l()(),t.qb(19,0,null,null,8,\"ion-footer\",[],null,null,null,o.hb,o.p)),t.pb(20,49152,null,0,a.z,[t.h,t.k,t.x],null,null),(l()(),t.qb(21,0,null,0,6,\"ion-toolbar\",[[\"color\",\"primary\"]],null,null,null,o.Jb,o.R)),t.pb(22,49152,null,0,a.Cb,[t.h,t.k,t.x],{color:[0,\"color\"]},null),(l()(),t.qb(23,0,null,0,4,\"ion-button\",[[\"color\",\"light\"],[\"expand\",\"full\"],[\"fill\",\"clear\"]],null,[[null,\"click\"]],(function(l,n,e){var t=!0;return\"click\"===n&&(t=!1!==l.component.selectImage()&&t),t}),o.V,o.d)),t.pb(24,49152,null,0,a.k,[t.h,t.k,t.x],{color:[0,\"color\"],expand:[1,\"expand\"],fill:[2,\"fill\"]},null),(l()(),t.qb(25,0,null,0,1,\"ion-icon\",[[\"name\",\"camera\"],[\"slot\",\"start\"]],null,null,null,o.kb,o.s)),t.pb(26,49152,null,0,a.C,[t.h,t.k,t.x],{name:[0,\"name\"]},null),(l()(),t.Jb(-1,0,[\" Select Image\"]))],(function(l,n){var e=n.component;l(n,7,0,\"dark\"),l(n,9,0,\"search\"),l(n,14,0,0==e.images.length),l(n,18,0,e.images),l(n,22,0,\"primary\"),l(n,24,0,\"light\",\"full\",\"clear\"),l(n,26,0,\"camera\")}),null)}function v(l){return t.Lb(0,[(l()(),t.qb(0,0,null,null,1,\"app-notification\",[],null,null,null,O,x)),t.pb(1,114688,null,0,g,[h,b.a,k.c,p.a,a.a,a.Ob,y.b,a.Jb,a.Gb,t.h,d.a],null,null)],(function(l,n){l(n,1,0)}),null)}var P=t.mb(\"app-notification\",g,v,{},{},[]),R=e(\"s7LF\"),F=e(\"iInd\");class T{}e.d(n,\"NotificationPageModuleNgFactory\",(function(){return S}));var S=t.nb(i,[],(function(l){return t.zb([t.Ab(512,t.j,t.Y,[[8,[u.a,P]],[3,t.j],t.v]),t.Ab(4608,r.k,r.j,[t.s,[2,r.s]]),t.Ab(4608,R.g,R.g,[]),t.Ab(4608,a.b,a.b,[t.x,t.g]),t.Ab(4608,a.Hb,a.Hb,[a.b,t.j,t.p]),t.Ab(4608,a.Kb,a.Kb,[a.b,t.j,t.p]),t.Ab(1073742336,r.b,r.b,[]),t.Ab(1073742336,R.f,R.f,[]),t.Ab(1073742336,R.a,R.a,[]),t.Ab(1073742336,a.Eb,a.Eb,[]),t.Ab(1073742336,F.n,F.n,[[2,F.s],[2,F.m]]),t.Ab(1073742336,T,T,[]),t.Ab(1073742336,i,i,[]),t.Ab(1024,F.k,(function(){return[[{path:\"\",component:g}]]}),[])])}))}}]);","extractedComments":[]}