{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{E3o2:function(l,n,t){\"use strict\";t.r(n);var e=t(\"CcnG\"),r=function(){return function(){}}(),o=t(\"pMnS\"),u=t(\"ZZ/e\"),i=t(\"oBZk\"),a=t(\"Ip0R\"),s=t(\"mrSG\"),c=t(\"a3Cf\"),b=function(l){function n(){var n=null!==l&&l.apply(this,arguments)||this;return n.DestinationType={DATA_URL:0,FILE_URI:1,NATIVE_URI:2},n.EncodingType={JPEG:0,PNG:1},n.MediaType={PICTURE:0,VIDEO:1,ALLMEDIA:2},n.PictureSourceType={PHOTOLIBRARY:0,CAMERA:1,SAVEDPHOTOALBUM:2},n.PopoverArrowDirection={ARROW_UP:1,ARROW_DOWN:2,ARROW_LEFT:4,ARROW_RIGHT:8,ARROW_ANY:15},n.Direction={BACK:0,FRONT:1},n}return s.d(n,l),n.prototype.getPicture=function(l){return Object(c.cordova)(this,\"getPicture\",{callbackOrder:\"reverse\"},arguments)},n.prototype.cleanup=function(){return Object(c.cordova)(this,\"cleanup\",{platforms:[\"iOS\"]},arguments)},n.pluginName=\"Camera\",n.plugin=\"cordova-plugin-camera\",n.pluginRef=\"navigator.camera\",n.repo=\"https://github.com/apache/cordova-plugin-camera\",n.platforms=[\"Android\",\"Browser\",\"iOS\",\"Windows\"],n}(c.IonicNativePlugin),p=t(\"01F9\"),h=t(\"Yttj\"),f=t(\"iWj2\"),m=t(\"2WpN\"),d=function(){function l(l,n,t,e,r,o,u,i,a,s,c){this.camera=l,this.file=n,this.http=t,this.webview=e,this.actionSheetController=r,this.toastController=o,this.storage=u,this.plt=i,this.loadingController=a,this.ref=s,this.filePath=c,this.images=[]}return l.prototype.ngOnInit=function(){var l=this;this.plt.ready().then((function(){l.loadStoredImages()}))},l.prototype.loadStoredImages=function(){var l=this;this.storage.get(\"my_images\").then((function(n){if(n){var t=JSON.parse(n);l.images=[];for(var e=0,r=t;e<r.length;e++){var o=r[e],u=l.file.dataDirectory+o,i=l.pathForImage(u);l.images.push({name:o,path:i,filePath:u})}}}))},l.prototype.pathForImage=function(l){return null===l?\"\":this.webview.convertFileSrc(l)},l.prototype.presentToast=function(l){return s.b(this,void 0,void 0,(function(){return s.e(this,(function(n){switch(n.label){case 0:return[4,this.toastController.create({message:l,position:\"bottom\",duration:3e3})];case 1:return n.sent().present(),[2]}}))}))},l.prototype.selectImage=function(){return s.b(this,void 0,void 0,(function(){var l=this;return s.e(this,(function(n){switch(n.label){case 0:return[4,this.actionSheetController.create({header:\"Select Image source\",buttons:[{text:\"Load from Library\",handler:function(){l.takePicture(l.camera.PictureSourceType.PHOTOLIBRARY)}},{text:\"Use Camera\",handler:function(){l.takePicture(l.camera.PictureSourceType.CAMERA)}},{text:\"Cancel\",role:\"cancel\"}]})];case 1:return[4,n.sent().present()];case 2:return n.sent(),[2]}}))}))},l.prototype.takePicture=function(l){var n=this;this.camera.getPicture({quality:100,sourceType:l,saveToPhotoAlbum:!1,correctOrientation:!0}).then((function(t){if(n.platform.is(\"android\")&&l===n.camera.PictureSourceType.PHOTOLIBRARY)n.filePath.resolveNativePath(t).then((function(l){var e=l.substr(0,l.lastIndexOf(\"/\")+1),r=t.substring(t.lastIndexOf(\"/\")+1,t.lastIndexOf(\"?\"));n.copyFileToLocalDir(e,r,n.createFileName())}));else{var e=t.substr(t.lastIndexOf(\"/\")+1),r=t.substr(0,t.lastIndexOf(\"/\")+1);n.copyFileToLocalDir(r,e,n.createFileName())}}))},l.prototype.createFileName=function(){return(new Date).getTime()+\".jpg\"},l.prototype.copyFileToLocalDir=function(l,n,t){var e=this;this.file.copyFile(l,n,this.file.dataDirectory,t).then((function(l){e.updateStoredImages(t)}),(function(l){e.presentToast(\"Error while storing file.\")}))},l.prototype.updateStoredImages=function(l){var n=this;this.storage.get(\"my_images\").then((function(t){var e=JSON.parse(t);e?(e.push(l),n.storage.set(\"my_images\",JSON.stringify(e))):n.storage.set(\"my_images\",JSON.stringify([l]));var r=n.file.dataDirectory+l,o=n.pathForImage(r);n.images=[{name:l,path:o,filePath:r}].concat(n.images),n.ref.detectChanges()}))},l.prototype.deleteImage=function(l,n){var t=this;this.images.splice(n,1),this.storage.get(\"my_images\").then((function(n){var e=JSON.parse(n).filter((function(n){return n!=l.name}));t.storage.set(\"my_images\",JSON.stringify(e));var r=l.filePath.substr(0,l.filePath.lastIndexOf(\"/\")+1);t.file.removeFile(r,l.name).then((function(l){t.presentToast(\"File removed.\")}))}))},l.prototype.startUpload=function(l){var n=this;this.file.resolveLocalFilesystemUrl(l.filePath).then((function(l){l.file((function(l){return n.readFile(l)}))})).catch((function(l){n.presentToast(\"Error while reading file.\")}))},l.prototype.readFile=function(l){var n=this,t=new FileReader;t.onload=function(){var e=new FormData,r=new Blob([t.result],{type:l.type});e.append(\"file\",r,l.name),n.uploadImageData(e)},t.readAsArrayBuffer(l)},l.prototype.uploadImageData=function(l){return s.b(this,void 0,void 0,(function(){var n,t=this;return s.e(this,(function(e){switch(e.label){case 0:return[4,this.loadingController.create({message:\"Uploading image...\"})];case 1:return[4,(n=e.sent()).present()];case 2:return e.sent(),this.http.post(\"http://192.168.64.2/server_easymc/upload.php\",l).pipe(Object(m.a)((function(){n.dismiss()}))).subscribe((function(l){t.presentToast(l.success?\"File upload complete.\":\"File upload failed.\")})),[2]}}))}))},l}(),g=t(\"t/Na\"),y=t(\"iw74\"),v=e.qb({encapsulation:0,styles:[[\"\"]],data:{}});function k(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,2,\"h3\",[[\"text-center\",\"\"]],null,null,null,null,null)),e.rb(1,16384,null,0,u.d,[e.k],null,null),(l()(),e.Lb(-1,null,[\"Please Select Image!\"]))],null,null)}function O(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,17,\"ion-item\",[[\"text-wrap\",\"\"]],null,null,null,i.pb,i.x)),e.rb(1,49152,null,0,u.H,[e.h,e.k,e.z],null,null),e.rb(2,16384,null,0,u.d,[e.k],null,null),(l()(),e.sb(3,0,null,0,3,\"ion-thumbnail\",[[\"slot\",\"start\"]],null,null,null,i.Hb,i.P)),e.rb(4,49152,null,0,u.zb,[e.h,e.k,e.z],null,null),(l()(),e.sb(5,0,null,0,1,\"ion-img\",[],null,null,null,i.lb,i.t)),e.rb(6,49152,null,0,u.D,[e.h,e.k,e.z],{src:[0,\"src\"]},null),(l()(),e.sb(7,0,null,0,2,\"ion-label\",[],null,null,null,i.qb,i.y)),e.rb(8,49152,null,0,u.N,[e.h,e.k,e.z],null,null),(l()(),e.Lb(9,0,[\" \",\" \"])),(l()(),e.sb(10,0,null,0,3,\"ion-button\",[[\"fill\",\"clear\"],[\"slot\",\"end\"]],null,[[null,\"click\"]],(function(l,n,t){var e=!0;return\"click\"===n&&(e=!1!==l.component.startUpload(l.context.$implicit)&&e),e}),i.V,i.d)),e.rb(11,49152,null,0,u.k,[e.h,e.k,e.z],{fill:[0,\"fill\"]},null),(l()(),e.sb(12,0,null,0,1,\"ion-icon\",[[\"name\",\"cloud-upload\"],[\"slot\",\"icon-only\"]],null,null,null,i.kb,i.s)),e.rb(13,49152,null,0,u.C,[e.h,e.k,e.z],{name:[0,\"name\"]},null),(l()(),e.sb(14,0,null,0,3,\"ion-button\",[[\"fill\",\"clear\"],[\"slot\",\"end\"]],null,[[null,\"click\"]],(function(l,n,t){var e=!0;return\"click\"===n&&(e=!1!==l.component.deleteImage(l.context.$implicit,l.context.index)&&e),e}),i.V,i.d)),e.rb(15,49152,null,0,u.k,[e.h,e.k,e.z],{fill:[0,\"fill\"]},null),(l()(),e.sb(16,0,null,0,1,\"ion-icon\",[[\"name\",\"trash\"],[\"slot\",\"icon-only\"]],null,null,null,i.kb,i.s)),e.rb(17,49152,null,0,u.C,[e.h,e.k,e.z],{name:[0,\"name\"]},null)],(function(l,n){l(n,6,0,n.context.$implicit.path),l(n,11,0,\"clear\"),l(n,13,0,\"cloud-upload\"),l(n,15,0,\"clear\"),l(n,17,0,\"trash\")}),(function(l,n){l(n,9,0,n.context.$implicit.name)}))}function I(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,9,\"ion-header\",[],null,null,null,i.jb,i.r)),e.rb(1,49152,null,0,u.B,[e.h,e.k,e.z],null,null),(l()(),e.sb(2,0,null,0,7,\"ion-toolbar\",[],null,null,null,i.Jb,i.R)),e.rb(3,49152,null,0,u.Cb,[e.h,e.k,e.z],null,null),(l()(),e.sb(4,0,null,0,5,\"ion-buttons\",[[\"slot\",\"primary\"]],null,null,null,i.W,i.e)),e.rb(5,49152,null,0,u.l,[e.h,e.k,e.z],null,null),(l()(),e.sb(6,0,null,0,3,\"ion-button\",[[\"color\",\"dark\"]],null,null,null,i.V,i.d)),e.rb(7,49152,null,0,u.k,[e.h,e.k,e.z],{color:[0,\"color\"]},null),(l()(),e.sb(8,0,null,0,1,\"ion-icon\",[[\"name\",\"search\"],[\"slot\",\"icon-only\"]],null,null,null,i.kb,i.s)),e.rb(9,49152,null,0,u.C,[e.h,e.k,e.z],{name:[0,\"name\"]},null),(l()(),e.sb(10,0,null,null,8,\"ion-content\",[[\"padding\",\"\"]],null,null,null,i.eb,i.m)),e.rb(11,49152,null,0,u.u,[e.h,e.k,e.z],null,null),e.rb(12,16384,null,0,u.d,[e.k],null,null),(l()(),e.hb(16777216,null,0,1,null,k)),e.rb(14,16384,null,0,a.i,[e.N,e.K],{ngIf:[0,\"ngIf\"]},null),(l()(),e.sb(15,0,null,0,3,\"ion-list\",[],null,null,null,i.rb,i.z)),e.rb(16,49152,null,0,u.O,[e.h,e.k,e.z],null,null),(l()(),e.hb(16777216,null,0,1,null,O)),e.rb(18,278528,null,0,a.h,[e.N,e.K,e.s],{ngForOf:[0,\"ngForOf\"]},null),(l()(),e.sb(19,0,null,null,8,\"ion-footer\",[],null,null,null,i.hb,i.p)),e.rb(20,49152,null,0,u.z,[e.h,e.k,e.z],null,null),(l()(),e.sb(21,0,null,0,6,\"ion-toolbar\",[[\"color\",\"primary\"]],null,null,null,i.Jb,i.R)),e.rb(22,49152,null,0,u.Cb,[e.h,e.k,e.z],{color:[0,\"color\"]},null),(l()(),e.sb(23,0,null,0,4,\"ion-button\",[[\"color\",\"light\"],[\"expand\",\"full\"],[\"fill\",\"clear\"]],null,[[null,\"click\"]],(function(l,n,t){var e=!0;return\"click\"===n&&(e=!1!==l.component.selectImage()&&e),e}),i.V,i.d)),e.rb(24,49152,null,0,u.k,[e.h,e.k,e.z],{color:[0,\"color\"],expand:[1,\"expand\"],fill:[2,\"fill\"]},null),(l()(),e.sb(25,0,null,0,1,\"ion-icon\",[[\"name\",\"camera\"],[\"slot\",\"start\"]],null,null,null,i.kb,i.s)),e.rb(26,49152,null,0,u.C,[e.h,e.k,e.z],{name:[0,\"name\"]},null),(l()(),e.Lb(-1,0,[\" Select Image\"]))],(function(l,n){var t=n.component;l(n,7,0,\"dark\"),l(n,9,0,\"search\"),l(n,14,0,0==t.images.length),l(n,18,0,t.images),l(n,22,0,\"primary\"),l(n,24,0,\"light\",\"full\",\"clear\"),l(n,26,0,\"camera\")}),null)}function C(l){return e.Nb(0,[(l()(),e.sb(0,0,null,null,1,\"app-notification\",[],null,null,null,I,v)),e.rb(1,114688,null,0,d,[b,p.a,g.c,h.a,u.a,u.Ob,y.b,u.Jb,u.Gb,e.h,f.a],null,null)],(function(l,n){l(n,1,0)}),null)}var P=e.ob(\"app-notification\",d,C,{},{},[]),R=t(\"gIcY\"),N=t(\"ZYCi\"),T=function(){return function(){}}();t.d(n,\"NotificationPageModuleNgFactory\",(function(){return F}));var F=e.pb(r,[],(function(l){return e.Bb([e.Cb(512,e.j,e.ab,[[8,[o.a,P]],[3,e.j],e.x]),e.Cb(4608,a.k,a.j,[e.u,[2,a.s]]),e.Cb(4608,R.g,R.g,[]),e.Cb(4608,u.b,u.b,[e.z,e.g]),e.Cb(4608,u.Hb,u.Hb,[u.b,e.j,e.q]),e.Cb(4608,u.Kb,u.Kb,[u.b,e.j,e.q]),e.Cb(1073742336,a.b,a.b,[]),e.Cb(1073742336,R.f,R.f,[]),e.Cb(1073742336,R.a,R.a,[]),e.Cb(1073742336,u.Eb,u.Eb,[]),e.Cb(1073742336,N.n,N.n,[[2,N.s],[2,N.m]]),e.Cb(1073742336,T,T,[]),e.Cb(1073742336,r,r,[]),e.Cb(1024,N.k,(function(){return[[{path:\"\",component:d}]]}),[])])}))}}]);","extractedComments":[]}