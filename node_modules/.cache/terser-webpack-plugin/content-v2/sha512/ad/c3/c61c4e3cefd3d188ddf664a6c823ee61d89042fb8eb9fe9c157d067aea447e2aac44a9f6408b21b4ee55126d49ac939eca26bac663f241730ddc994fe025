{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{rkXJ:function(e,t,r){\"use strict\";r.r(t);var i=r(\"CcnG\"),n=function(){return function(){}}(),a=r(\"pMnS\"),o=r(\"mrSG\"),s=r(\"LG6+\"),l=r(\"ZZ/e\"),u=r(\"01F9\"),c=r(\"Yttj\"),p=r(\"iWj2\"),f=r(\"h3kM\"),h=r(\"2WpN\"),m=function(){function e(e,t,r,i,n,a,o,s,l,u,c,p,f,h){this.camera=e,this.file=t,this.http=r,this.webview=i,this.actionSheetController=n,this.toastController=a,this.storage=o,this.platform=s,this.loadingController=l,this.ref=u,this.filePath=c,this.actRoute=p,this.Provider=f,this.router=h,this.images=[]}return e.prototype.ngOnInit=function(){var e=this;this.actRoute.params.subscribe((function(t){e.employer_id=t.employer_id,e.img_profile=t.img_profile,console.log(t)})),this.platform.ready().then((function(){e.loadStoredImages()}))},e.prototype.loadStoredImages=function(){var e=this;this.storage.get(\"my_images\").then((function(t){if(t){var r=JSON.parse(t);e.images=[];for(var i=0,n=r;i<n.length;i++){var a=n[i],o=e.file.dataDirectory+a,s=e.pathForImage(o);e.images.push({name:a,path:s,filePath:o})}}}))},e.prototype.pathForImage=function(e){return null===e?\"\":this.webview.convertFileSrc(e)},e.prototype.presentToast=function(e){return o.b(this,void 0,void 0,(function(){return o.e(this,(function(t){switch(t.label){case 0:return[4,this.toastController.create({message:e,position:\"bottom\",duration:3e3})];case 1:return t.sent().present(),[2]}}))}))},e.prototype.selectImage=function(){return o.b(this,void 0,void 0,(function(){var e=this;return o.e(this,(function(t){switch(t.label){case 0:return[4,this.actionSheetController.create({header:\"Select Image source\",buttons:[{text:\"Load from Library\",handler:function(){e.takePicture(e.camera.PictureSourceType.PHOTOLIBRARY)}},{text:\"Use Camera\",handler:function(){e.takePicture(e.camera.PictureSourceType.CAMERA)}},{text:\"Cancel\",role:\"cancel\"}]})];case 1:return[4,t.sent().present()];case 2:return t.sent(),[2]}}))}))},e.prototype.takePicture=function(e){var t=this;this.camera.getPicture({quality:100,sourceType:e,saveToPhotoAlbum:!1,correctOrientation:!0}).then((function(r){if(t.platform.is(\"android\")&&e===t.camera.PictureSourceType.PHOTOLIBRARY)t.filePath.resolveNativePath(r).then((function(e){var i=e.substr(0,e.lastIndexOf(\"/\")+1),n=r.substring(r.lastIndexOf(\"/\")+1,r.lastIndexOf(\"?\"));t.copyFileToLocalDir(i,n,t.createFileName())}));else{var i=r.substr(r.lastIndexOf(\"/\")+1),n=r.substr(0,r.lastIndexOf(\"/\")+1);t.copyFileToLocalDir(n,i,t.createFileName())}}))},e.prototype.createFileName=function(){return(new Date).getTime()+\".jpg\"},e.prototype.copyFileToLocalDir=function(e,t,r){var i=this;this.file.copyFile(e,t,this.file.dataDirectory,r).then((function(e){i.updateStoredImages(r)}),(function(e){i.presentToast(\"Error while storing file.\")}))},e.prototype.updateStoredImages=function(e){var t=this;this.storage.get(\"my_images\").then((function(r){var i=JSON.parse(r);i?(i.push(e),t.storage.set(\"my_images\",JSON.stringify(i))):t.storage.set(\"my_images\",JSON.stringify([e]));var n=t.file.dataDirectory+e,a=t.pathForImage(n);t.images=[{name:e,path:a,filePath:n}].concat(t.images),t.ref.detectChanges()}))},e.prototype.deleteImage=function(e,t){var r=this;this.images.splice(t,1),this.storage.get(\"my_images\").then((function(t){var i=JSON.parse(t).filter((function(t){return t!=e.name}));r.storage.set(\"my_images\",JSON.stringify(i));var n=e.filePath.substr(0,e.filePath.lastIndexOf(\"/\")+1);r.file.removeFile(n,e.name).then((function(e){r.presentToast(\"File removed.\")}))}))},e.prototype.startUpload=function(e){var t=this;this.file.resolveLocalFilesystemUrl(e.filePath).then((function(e){e.file((function(e){return t.readFile(e)}))})).catch((function(e){t.presentToast(\"Error while reading file.\")}))},e.prototype.readFile=function(e){var t=this,r=new FileReader;r.onload=function(){var i=new FormData,n=new Blob([r.result],{type:e.type});i.append(\"file\",n,e.name),t.uploadImageData(i)},r.readAsArrayBuffer(e)},e.prototype.uploadImageData=function(e){return o.b(this,void 0,void 0,(function(){var t,r=this;return o.e(this,(function(i){switch(i.label){case 0:return[4,this.loadingController.create({message:\"Uploading image...\"})];case 1:return[4,(t=i.sent()).present()];case 2:return i.sent(),this.http.post(\"http://192.168.64.2/server_easymc/upload.php\",e).pipe(Object(h.a)((function(){t.dismiss()}))).subscribe((function(e){r.presentToast(e.success?\"File upload complete.\":\"File upload failed.\")})),[2]}}))}))},e.prototype.updateProses=function(){var e=this;return new Promise((function(t){e.Provider.postData({aksi:\"update\",img_profile:e.img_profile},\"upload.php\").subscribe((function(t){e.router.navigate([\"/employer/profileem\"]),console.log(\"OK\")}))}))},e}(),d=r(\"t/Na\"),b=r(\"iw74\"),g=r(\"ZYCi\"),y=i.sb({encapsulation:0,styles:[[\"\"]],data:{}});function v(e){return i.Qb(0,[],null,null)}function I(e){return i.Qb(0,[(e()(),i.ub(0,0,null,null,1,\"app-uploadprofile\",[],null,null,null,v,y)),i.tb(1,114688,null,0,m,[s.a,u.a,d.c,c.a,l.a,l.Qb,b.b,l.Lb,l.Gb,i.h,p.a,g.a,f.a,g.m],null,null)],(function(e,t){e(t,1,0)}),null)}var P=i.qb(\"app-uploadprofile\",m,I,{},{},[]),F=r(\"Ip0R\"),w=r(\"gIcY\"),O=function(){return function(){}}();r.d(t,\"UploadprofilePageModuleNgFactory\",(function(){return E}));var E=i.rb(n,[],(function(e){return i.Db([i.Eb(512,i.j,i.cb,[[8,[a.a,P]],[3,i.j],i.x]),i.Eb(4608,F.l,F.k,[i.u,[2,F.z]]),i.Eb(4608,w.j,w.j,[]),i.Eb(4608,l.b,l.b,[i.z,i.g]),i.Eb(4608,l.Hb,l.Hb,[l.b,i.j,i.q]),i.Eb(4608,l.Mb,l.Mb,[l.b,i.j,i.q]),i.Eb(1073742336,F.b,F.b,[]),i.Eb(1073742336,w.i,w.i,[]),i.Eb(1073742336,w.a,w.a,[]),i.Eb(1073742336,l.Eb,l.Eb,[]),i.Eb(1073742336,g.n,g.n,[[2,g.s],[2,g.m]]),i.Eb(1073742336,O,O,[]),i.Eb(1073742336,n,n,[]),i.Eb(1024,g.k,(function(){return[[{path:\"\",component:m}]]}),[])])}))}}]);","extractedComments":[]}